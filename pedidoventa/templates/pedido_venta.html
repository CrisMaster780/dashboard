{% extends 'index.html' %}
{% load static %}



{% block content %}

<div class="my-2 p-2">
    {% include 'formulario_cliente.html' %}
</div>

<div class="my-2 p-2" >
    {% include 'formulario_producto.html' %}


</div>

<div class="my-2 p-2">
    {% include 'detalle_venta.html' %}
</div>




{% if messages %}
{% for mensaje in messages %}
<script>
    {% if mensaje.tags == 'success' %}
    Swal.fire({
        title: 'Éxito',
        text: `{{mensaje}}`,
        icon: 'success',
        showCancelButton: false,
        confirmButtonColor: '#3085d6',
        confirmButtonText: 'OK'
    }).then((result) => {
        if (result.isConfirmed) {
            // Redirige a la página de lista_clientes después de hacer clic en OK
            window.location.href = "{% url 'pedidoventa' %}";
        }
    });
    {% elif mensaje.tags == 'warning' %}
    Swal.fire({
        title: 'Ups',
        text: `{{mensaje|safe}}`,
        icon: 'warning',
        showCancelButton: false,
        confirmButtonColor: '#3085d6',
        confirmButtonText: 'OK'
    }).then((result) => {
        if (result.isConfirmed) {
            // Redirige a la página de lista_clientes después de hacer clic en OK
            window.location.href = "{% url 'pedidoventa' %}";
        }
    });
    {% elif mensaje.tags == 'error' %}
    Swal.fire({
        title: 'Error',
        text: `{{mensaje}}`,
        icon: 'error',
        showCancelButton: false,
        confirmButtonColor: '#3085d6',
        confirmButtonText: 'OK'
    }).then((result) => {
        if (result.isConfirmed) {
            // Redirige a la página de lista_clientes después de hacer clic en OK
            window.location.href = "{% url 'pedidoventa' %}";
        }
    });
    {% endif %}
</script>
{% endfor %}
{% endif %}

<!-- Modal de confirmación de eliminación -->
<script>
    function confirmarEliminacion(id_prod) {
        Swal.fire({
            title: '¿Estás seguro?',
            text: 'Esta acción no se puede deshacer',
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#d33',
            cancelButtonColor: '#3085d6',
            confirmButtonText: 'Sí, eliminarlo'
        }).then((result) => {
            if (result.isConfirmed) {
                // Aquí puedes redirigir a la vista de eliminación o enviar una solicitud AJAX para eliminar el cliente
                window.location.href = "{% url 'eliminar_producto' id_prod=0 %}".replace('0', id_prod);
            }
        });
    }

   




</script>
{% endblock %}